function reload_rsvps(a){window.XMLHttpRequest?xmlhttp=new XMLHttpRequest:xmlhttp=new ActiveXObject("Microsoft.XMLHTTP"),xmlhttp.onreadystatechange=function(){4==xmlhttp.readyState&&200==xmlhttp.status&&(document.getElementById("rsvps").innerHTML=xmlhttp.responseText,sortIt())},xmlhttp.open("GET","../inc/rsvps.php?id="+a,!0),xmlhttp.send()}function show_loader(){var a=$("#loader");$("body").css("opacity","0.8"),a.toggleClass("is-active")}function hide_loader(){var a=$("#loader");$("body").css("opacity","1"),a.toggleClass("is-active")}$("body").on("click","#add-rsvp-btn",function(){$("#add-rsvp").fadeToggle("fast")}),$("#add-rsvp form .close-btn").click(function(a){a.preventDefault(),$("#add-rsvp").fadeToggle("fast")}),$("#add-rsvp-do").click(function(a){a.preventDefault();var b="add_rsvp",c=$("input[name=attending]:checked").val(),d=$("#add-event-id").val(),e=$("#add-first-name").val(),f=$("#add-last-name").val(),g=$("#add-email").val(),h=$("#add-notes").val();show_loader(),$.ajax({type:"POST",url:"../inc/rsvpController.php",data:{action:b,attending:c,eventID:d,firstName:e,lastName:f,email:g,info:h},success:function(a){var b=document.querySelector("#action-message"),c={message:a};b.MaterialSnackbar.showSnackbar(c),reload_rsvps(d)}}).done(function(){$("#add-rsvp").fadeToggle("fast"),$("#add-rsvp form")[0].reset(),hide_loader()})}),$("body").on("click",".edit-rsvp-btn",function(){$("#edit-rsvp").fadeToggle("fast");var a=$(this).closest(".rsvp-edit-btns").data("rsvp-id");$("#edit-rsvp-form #edit-rsvp-id").val(a);var b=$("#rsvp-list tbody tr[data-rsvp-id="+a+"]")[0].cells,c=b[1].textContent,d=b[2].textContent,e=b[3].textContent,f=b[4].textContent,g=b[5].textContent;g=g.substring(0,g.length-101),g=g.substring(9),"no"==c.toLowerCase()?(document.getElementById("edit-attending-y").parentNode.MaterialRadio.uncheck(),document.getElementById("edit-attending-n").parentNode.MaterialRadio.check()):(document.getElementById("edit-attending-n").parentNode.MaterialRadio.uncheck(),document.getElementById("edit-attending-y").parentNode.MaterialRadio.check()),$("#edit-rsvp-form #edit-first-name").val(d),$("#edit-rsvp-form #edit-first-name").parent("div").addClass("is-dirty"),$("#edit-rsvp-form #edit-last-name").val(e),$("#edit-rsvp-form #edit-last-name").parent("div").addClass("is-dirty"),$("#edit-rsvp-form #edit-email").val(f),$("#edit-rsvp-form #edit-email").parent("div").addClass("is-dirty"),$("#edit-rsvp-form #edit-notes").val(g),$("#edit-rsvp-form #edit-notes").parent("div").addClass("is-dirty")}),$("#edit-rsvp form .close-btn").click(function(a){a.preventDefault(),$("#edit-rsvp").fadeToggle("fast")}),$("body").on("click","#edit-rsvp-do",function(){event.preventDefault(),show_loader();var a="edit_rsvp",b=$("input[name=edit-attending]:checked").val(),c=$("#edit-event-id").val(),d=$("#edit-first-name").val(),e=$("#edit-last-name").val(),f=$("#edit-email").val(),g=$("#edit-notes").val(),c=$("#rsvp-list").data("event-id"),h=$("body").find("#edit-rsvp-form #edit-rsvp-id").val();$.ajax({type:"POST",url:"../inc/rsvpController.php",data:{action:a,rsvpID:h,eventID:c,attending:b,firstName:d,lastName:e,email:f,info:g},success:function(a){var b=document.querySelector("#action-message"),d={message:a};b.MaterialSnackbar.showSnackbar(d),reload_rsvps(c)}}).done(function(){$("#edit-rsvp").fadeToggle("fast"),$("#edit-rsvp form")[0].reset(),hide_loader()})}),$("body").on("click",".delete-rsvp-btn",function(){$("body").append('<div class="mdl-card mdl-shadow--6dp" id="confirm-delete"><h3>Are you sure?</h3><p>This will delete this persons rsvp and guests from the database</p><div class="mdl-card__actions mdl-card--border"><button class="mdl-button mdl-js-button mdl-button--icon mdl-button--accent confirm-delete-btn"><i class="material-icons">delete</i></button><button class="mdl-button mdl-js-button mdl-button--icon mdl-button--primary clear-delete-btn"><i class="material-icons">clear</i></button></div></div>'),$("#confirm-delete").fadeToggle("fast"),$(".clear-delete-btn").click(function(){$("#confirm-delete").fadeToggle("fast",function(){$("#confirm-delete").remove()})});var a=$("#rsvp-list").data("event-id"),b=$(this).closest(".rsvp-edit-btns").data("rsvp-id");$(".confirm-delete-btn").click(function(){show_loader(),$("#confirm-delete").fadeToggle("fast",function(){$("#confirm-delete").remove()});var c="delete_rsvp";$.ajax({type:"POST",url:"../inc/rsvpController.php",data:{action:c,eventID:a,rsvpID:b},success:function(b){var c=document.querySelector("#action-message"),d={message:b};c.MaterialSnackbar.showSnackbar(d),reload_rsvps(a)}}).done(function(){hide_loader()})})});
